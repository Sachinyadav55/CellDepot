[["index.html", "Supplementary Materials - CellDepot: A unified repository for scRNAseq data and visual exploration Chapter 1 Preface", " Supplementary Materials - CellDepot: A unified repository for scRNAseq data and visual exploration Dongdong Lin Biogen lindongdo@gmail.com Yirui Chen Biogen yirui.chen@biogen.com Soumya Negi Biogen soumya.negi@biogen.com Derrick Cheng BioInfoRx derrick@bioinforx.com Zhengyu Ouyang BioInfoRx oyoung@bioinforx.com David Sexton Biogen david.sexton@biogen.com Kejie Li Biogen kejie.li@biogen.com Baohong Zhang Biogen baohong.zhang@biogen.com 2021-12-08 Chapter 1 Preface This is a **supplementary materials* written in Markdown, which provides the detailed guide for CellDepot web portal. "],["getting-start-with-celldepot.html", "Chapter 2 Getting start with CellDepot 2.1 Sources of annotation and metadata 2.2 Data format, availability, and preparation 2.3 CellDepot platform and installation 2.4 How to set up cron job? 2.5 CellDepot API (Application Programming Interface) 2.6 Code availability 2.7 Online tutorials", " Chapter 2 Getting start with CellDepot 2.1 Sources of annotation and metadata The original metadata information of each scRNA-seq dataset is retrieved from h5ad file, which is a preferred way of sharing and storing an on-disk representation of anndata object. When importing the dataset to the system, user inputs additional metadata information as shown in (4.6). Both metadata are collected and stored in a MySQL database table that is presented at http://celldepot.bxgenomics.com and Biogen internal instance, http://go.biogen.com/CellDepot. 2.2 Data format, availability, and preparation CellDepot requires scRNA-seq data in h5ad file where the expression matrix is stored in CSC (compressed sparse column) instead of CSR (compressed sparse row) format to improve the speed of data retrieving. For example, designating genes as columns in the h5ad file creates the interactive plot five times faster than as rows. Just in case, we provide sample scripts to help users generate h5ad files. Having gene expression matrix, metadata, and layout files, users can easily combine and convert their data to h5ad file by following this R script on https://github.com/interactivereport/CellDepot/blob/main/toH5ad.R. In the case of lacking layout file, users can also create h5ad file by following the Jupyter notebook https://github.com/interactivereport/CellDepot/blob/main/raw2h5ad.ipynb with custom python script tailored to their own data. Categorical features extracted from a h5ad file are shown in the ‘annotation groups’ column of the table on CellDepot home page, while the numerical features are shown as the histograms in the rightmost panel on cellxgene VIP. (4.4.2) 2.3 CellDepot platform and installation The public version of CellDepot web portal is hosted at the web site, http://celldepot.bxgenomics.com and Biogen internal link http://go.biogen.com/CellDepot. It is implemented with MySQL database, an advanced search engine, and powerful interactive visualizing tools that allow users to explore attributes of datasets as well as scRNA-seq analysis results. Also, users can intentionally select single-cell RNA-seq datasets on the web interface by simply browsing the online dataset table or applying advanced search to perform the cross-dataset comparison. Moreover, CellDepot also provides comprehensive data analysis tools via an embedded interactive visualization plugin. To host private datasets, local instance of CellDepot on Unix server can be installed by following the guide here, https://celldepot.bxgenomics.com/celldepot_manual/install_environment.php. 2.4 How to set up cron job? The following cron job entry is needed to convert h5ad file to CSC format on the background, @hourly &lt;user-name&gt; cd /var/www/html/celldepot/app/core; php ./api_toCSCh5ad.php Note: Please make sure that the user has the permission to write in the data directory. 2.5 CellDepot API (Application Programming Interface) The CellDepot API web service provides a direct way to generate figures for users to share or embed in web page. For example, the following URL will generate a gene expression violin plot across cell clusters for IRAK4 gene for the data set with ID equaling one, https://celldepot.bxgenomics.com/celldepot/app/core/api_gene_plot.php?ID=1&amp;Genes=IRAK4&amp;Plot_Type=violin&amp;Subsampling=0&amp;n=0&amp;g=0&amp;Project_Group=CLUSTER. The complete format of the URL and explanation of parameters are detailed in the online documentation, https://celldepot.bxgenomics.com/celldepot_manual/api_gene_plot.php. 2.6 Code availability The source code, links to tutorials and other supplementary documents are provided at https://github.com/interactivereport/CellDepot. With broad adoption and contribution in mind, CellDepot is released under the MIT open-source license. The detailed instruction of local installation is available at https://celldepot.bxgenomics.com/celldepot_manual. 2.7 Online tutorials To better assist biologists to use CellDepot and integrated cellxgene VIP visual analytical tool, we created online easy-to-access HTML tutorials with step-by-step guides available at https://interactivereport.github.io/CellDepot/bookdown/docs/SITutorial.html for CellDepot and https://interactivereport.github.io/cellxgene_VIP/tutorial/docs/how-to-use-cellxgene-vip.html for cellxgene VIP, respectively. In addition, a question mark next to the title of each VIP function module provides a direct way to reach the corresponding section of the HTML document for help. "],["SITable.html", "Chapter 3 Supplemental Tables Table S1 - Comparison matrix of web portal tools Table S2 - Criterion for query search Table S3 - Criterion for data analysis explorer Table S4 - Project metadata captured in CellDepot", " Chapter 3 Supplemental Tables Table S1 - Comparison matrix of web portal tools Table link: https://github.com/interactivereport/CellDepot/blob/gh-pages/bookdown/S1.csv Web.application.repository CellDepot Corpora.Data.Portal gEAR CHARTS SCANNER Single.Cell.Portal Sfaria Repro.Genomics PanglaoDB Expression.Atlas scRNA.SeqDB conquer Jingle.Bells Human.Cell.ATLAS Year 2021 2021 2021 2020 2020 2020 2020 2019 2019 2019 2019 2018 2017 2017 Main function Database Explorer Y Y Y Y NA Y Y Y Y Y Y Y Y Y Query Search Advanced NA Basic I NA Intermediate Advanced Basic II Intermediate Advanced Intermediate Basic I Basic I Basic I Advanced Data Analysis Explorer Advanced Advanced Advanced Intermediate Intermediate Intermediate - Advanced NA Basic Intermediate Intermediate Basic - Intermediate Basic NA NA Visualization features Violin, dot, heatmap, bar, QC, scatter, density, embed-ding plots Bar, scatter, embed-ding plots Violin, dot, line, bar, QC, embed-ding plots, genome browser Bar, embed-ding plots Violin, dot, scatter,heatmap, embedding plots Violin, scatter, heatmap, embedding plots NA Violin, density, scatter plots, genome browser Bar, QC, scatter, embedding plots Heatmap, scatter, embedding plots Scatter, bar plots Scatter, QC plots Genome browser NA Scalability and Capacity Time to interactive 3.5 s 0.9 s 5.5 s 13.2 s 5.5 s 5.6 s 0.8 s 4.7 s 0.8 s 1.4 s 1.3 s 1.9 s 1.1 s 1.1 s Total blocking time 30 ms 50 ms 470 ms 10,020 ms 60 ms 100 ms 0 ms 300 ms 0 ms 40 ms 0 ms 100 ms 0 ms 0 ms Cumulative layout shift 0.033 0.596 0.733 0.329 0.004 0.04 0.162 0 0.001 0.281 0 0.127 0.015 0.001 Memory footprint 36,784K 33,252K 42,032K 559,568K 47,800K 73,188K 25,964K 45,696K 32,036K 32,912K 26,536K 34,380K 45,160K 49,472K Instant MAX CPU 32.7 15.6 54.2 237.3 49.8 144.1 29.6 51.1 7.7 74 26.5 35.9 26.5 21.9 Total number of datasets 270 174 163 21 52 387 (*) 177 140 237 (1368) 229 38 40 120 165 Data type supported Datasets diverse diverse hearing/brain tumor diverse diverse diverse reproduction diverse diverse diverse diverse immune-related diverse Datatypes Single-cell Single-cell Single-cell, Epigenetics Single-cell Single-cell Single-cell Single-cell Single-cell, Multi-omics Single-cell Single-cell, Protemics Single-cell Single-cell Single-cell Single-cell, Multi-omics Links Source Code link https://github.com/interactivereport/CellDepot https://github.com/chanzuckerberg/corpora-data-portal https://github.com/IGS/gEAR https://github.com/stewart-lab/CHARTS https://github.com/GuoshuaiCai/scanner https://github.com/broadinstitute/single_cell_portal_core https://github.com/theislab/sfaira-portal https://github.com/fchalmel/RGV https://github.com/oscar-franzen/PanglaoDB https://github.com/ebi-gene-expression-group/atlas NA https://github.com/csoneson/conquer_comparison https://drive.google.com/drive/folders/0BxSFjdiDhUI1amNoSks0SmpMdE0?resourcekey=0-s7Qw02gR8VhkS7hfdE9nPg https://github.com/HumanCellAtlas/ Demo link http://celldepot.bxgenomics.com/ https://cellxgene.cziscience.com/ umgear.org https://charts.morgridge.org https://www.thecailab.com/scanner/ https://singlecell.broadinstitute.org/single_cell https://theislab.github.io/sfaira-portal/ https://rgv.genouest.org/ https://panglaodb.se https://www.ebi.ac.uk/gxa/sc/home https://bioinfo.uth.edu/scRNA-seqdb/ http://imlspenticton.uzh.ch:3838/conquer/ https://jinglebells.bgu.ac.il/ https://data.humancellatlas.org/ Note: The criteria for query search and data analysis explorer please see Table S2 and S3. Table S2 - Criterion for query search Table link: https://github.com/interactivereport/CellDepot/blob/gh-pages/bookdown/S2.csv Query.Search Keyword.Search Multiple.Object.Search Category.Filters Basic S2 Y Basic II Y Intermediate Y Y Advanced Y Y Y Table S3 - Criterion for data analysis explorer Table link: https://github.com/interactivereport/CellDepot/blob/gh-pages/bookdown/S3.csv Data.Analysis.Explorer Analyze.scRNAseq.Data Anaylze.Gene.Expression Customize.Displays Basic Y Intermediate Y Y Advanced Y Y Y Table S4 - Project metadata captured in CellDepot Table link: https://github.com/interactivereport/CellDepot/blob/gh-pages/bookdown/S4.csv General.Category Expected.Variable.Type Description Annotation Groups String categorical features from h5ad file Cell Count Integer numbers of cell in study Actions Link three options: 1) Study summary information; 2) Data visualization and analysis; 3) Update project information Custom Accession String Customized accession name for individual project Description String Additional information DOI Link Digtial Object Identifier File Name String h5ad file name File Size Integer size of h5ad file Gene Count Integer numbers of gene in study Name Link project name Notes String study notes PMC ID Link Publication Title PubMed ID Link Speices String URL Link Year String "],["SITutorial.html", "Chapter 4 Supplemental Tutorial 4.1 Browse Projects 4.2 Search Projects 4.3 Project Filters 4.4 Visualize Datasets 4.5 Search Genes 4.6 Import Projects 4.7 Create Project 4.8 Update a Project", " Chapter 4 Supplemental Tutorial CellDepot is a scRNA-seq data portal consisting of a relational database management system, a graphical query builder, and data visualization tools, which can be accessed via the link, http://celldepot.bxgenomics.com for public datasets or a link to private installation, e.g., http://go.biogen.com/CellDepot for Biogen internal data collection. This is the supplemental tutorial providing detailed instructions. Clicking on a figure will bring up the enlarged view. Figure S1. CellDepot Homepage. Functions designated to different user roles are highlighted in red callout boxes. The interface contains multiple tabs at the top of the homepage, which correspond to major functionalities of CellDepot. All users can explore the existing datasets loaded in the public CellDepot for visualization and analysis while only admin users can upload datasets to a CellDepot instance, public or private. 4.1 Browse Projects Users can customize columns to be displayed by clicking on the green ‘Column Settings’ button. In addition, all or selected entries could be exported in CSV format. A quick search box is provided on the top-right corner of the table while building a complex query is exemplified in Figure S3 (4.2). Figure S2. Browsing projects in a personalized view. 4.2 Search Projects This function allows users to search projects of interest, which can be accessed through the homepage as well. Users can search projects by 17 attributes in multiple logic conditions: annotation groups, cell count, cellxgene VIP launch method, Custom accession, description, DOI, file name, file size, gene count, name, notes, PMC ID, Publication Title, PubMed ID, Species, URL, and/or Year. Figure S3. Workflow of searching projects by using the graphical multi-logic, multi-condition query builder. Six datasets are identified when searching by ‘Species is Human’ and ‘Annotation Group contains Neuron.’ 4.3 Project Filters This function lists the filtered datasets simply based on AND logic operation of checked items under various categories. It is a friendly feature for first-time users as they may not be familiar with the design of the database to construct more complex query. Figure S4. The ‘Project Filters’ page. 29 records are identified by filtering criteria of ‘Year’ equaling 2021 and ‘Species’ being human. 4.4 Visualize Datasets 4.4.1 View Details The dataset information consists of project summary and annotation groups. The project summary is provided by admin users when uploading projects while annotation groups are retrieved from uploaded h5ad files. Figure S5. How to view details of a dataset. Steps are outlined by red circled numbers. 4.4.2 Data Visualization and Analysis by cellxgene VIP CellDepot is not only a database management system, but also a web portal for visualizing and analyzing scRNA-seq datasets through embedded cellxgene VIP tool. By clicking ‘cellxgene VIP’ to access functional modules on the menu, users can perform advanced data visualization and analysis. To learn how to use cellxgene VIP, please go to https://interactivereport.github.io/cellxgene_VIP/tutorial/docs/how-to-use-cellxgene-vip.html. Figure S6. Visualization and analysis of a scRNA-seq dataset by cellxgene VIP. 4.4.3 Case Study 1 Exploration and visualization of differentially expressed genes (DEGs) between two types of cells. As shown in Figure S7a, two types of cells, Astrocytes (1036 cells) and Oligodendrocytes (4417 cells) are selected. By running differential gene expression analysis with one of the built-in statistical methods such as Welch’s t-test, we detected 1578 (DEGs), including 715 up-regulated and 853 down-regulated genes in astrocytes compared to oligodendrocytes (Figure S7a). The expression of the top four DEGs among the cell types indicates that gene MBP, ST18 and RNF220 are expressed explicitly in oligodendrocytes, while gene PITPNC3 is expressed mainly in astrocytes and endothelial cells (Figure S7b). Figure S7. Exploration of differentially expressed genes in dataset GSE140231 through cellxgene VIP. (a) Identifying differentially expressed genes in astrocytes and oligodendrocytes. (b) The expression of top four genes in various cell types as shown in dot plot. 4.5 Search Genes This tab allows searching on genes of interest with the expression cutoff. The search outcome provides users a list of projects in which genes of interest are expressed above the cutoff. Each project displays a link to project page and a plot if applicable. This plot can be either a violin plot or dot plot showing the gene expression level in a selected annotation group. Further, under “Advanced Options,” users can define the range of expression color scale and the percentage represented by the largest dot to have expression data from various projects plotted in a unified manner. Figure S8. Steps to find gene expression level of a gene in projects under ‘Search Genes’ tab. The final plot can be customized by available options listed in red callout boxes on the left side. 4.5.1 Case Study 2 Cross-project comparison of skeletal muscle marker genes PAX3, PAX7, PITX2, MYF5, MYF6, MYOD1, MYOG, NEB, and MYH3 among the datasets whose species is human and cell type is myogenic. Figure S9. Workflow of conducting the cross-project comparison of a list of genes among the selected datasets. 4.6 Import Projects The functionality is limited to admin users. To upload new projects to CellDepot database in batch, two types of files are required: 1) .h5ad files and 2) project information file in CSV (Comma Separated Values) format. First, the prepared h5ad files are required to be copied to a folder defined in the configuration file, e.g., /data/celldepot/all_h5ad_files/. Afterwards, admin users navigate to the CellDepot home page, click ‘Import Projects’ at the top menu, then ‘Download Example File’ to fill in meta information of datasets into the downloaded template for submission. In addition, there are two cellxgene VIP launch modes to chosen from, ‘Standard’ and ‘Preload in Memory.’ ‘Standard’ mode is for infrequently used datasets while ‘Preload in Memory’ should be selected to speed up loading and responding time of frequently used large datasets. After the metadata file is uploaded, CellDepot will automatically convert the dataset to CSC format if needed through a cron job (2.4). To explore the detail of imported datasets, users can enter ‘Browse Projects’ page and then search these datasets by user assigned ‘Custom Accession’ identifiers. Figure S10. Workflow of how to import new datasets. 4.7 Create Project Besides batch uploading under “Import Projects” tab, admin user can use the online form under this tab to submit information of a project. 4.8 Update a Project Project information including launch mode can be modified by admin users by clicking on ‘Update’ link of a project under ‘Actions’ column in the table. "],["404.html", "Page not found", " Page not found The page you requested cannot be found (perhaps it was moved or renamed). You may want to try searching to find the page's new location, or use the table of contents to find the page you are looking for. "]]
